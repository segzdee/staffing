<?php

use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| OvertimeStaff Web Routes
|--------------------------------------------------------------------------
|
| Shift marketplace routes for OvertimeStaff platform
| User types: Workers, Businesses, Agencies, AI Agents, Admins
|
*/

/*
|--------------------------------------------------------------------------
| Public Routes
|--------------------------------------------------------------------------
*/

// Homepage
Route::get('/', function() {
    return view('welcome');
})->name('home');
Route::get('home', function() {
    return redirect('/');
});

// Clear Cache (Admin only)
Route::get('/clear-cache', function() {
    Artisan::call('cache:clear');
    return redirect()->back()->with('success', 'Cache cleared successfully');
})->middleware('role');

// Logs (Admin only)
Route::get('logs', [\Rap2hpoutre\LaravelLogViewer\LogViewerController::class, 'index'])->middleware('role');

// PWA Manifest
Route::get("/manifest.json", function() {
    return redirect("/");
})->name("laravelpwa.manifest");
Route::view('offline','vendor.laravelpwa.offline');

/*
|--------------------------------------------------------------------------
| Authentication Routes
|--------------------------------------------------------------------------
*/

// Login
Route::get('login', 'Auth\LoginController@showLoginForm')->name('login');
Route::post('login', 'Auth\LoginController@login');
Route::get('logout', 'Auth\LoginController@logout');

// Registration (with user type selection)
Route::get('signup', 'Auth\RegisterController@showRegistrationForm')->name('register');
Route::post('signup', 'Auth\RegisterController@register');

// Password Reset
Route::get('password/reset', 'Auth\ForgotPasswordController@showLinkRequestForm')->name('password.request');
Route::post('password/email', 'Auth\ForgotPasswordController@sendResetLinkEmail')->name('password.email');
Route::get('password/reset/{token}', 'Auth\ResetPasswordController@showResetForm')->name('password.reset');
Route::post('password/reset', 'Auth\ResetPasswordController@reset');

// Social Login
Route::group(['middleware' => 'guest'], function() {
    Route::get('oauth/{provider}', 'SocialAuthController@redirect')->where('provider', '(facebook|google|twitter)$');
    Route::get('oauth/{provider}/callback', 'SocialAuthController@callback')->where('provider', '(facebook|google|twitter)$');
});

// Account Verification
Route::get('verify/account/{confirmation_code}', 'HomeController@getVerifyAccount')->where('confirmation_code','[A-Za-z0-9]+');

// Contact
Route::view('contact','index.contact');
Route::post('contact','HomeController@contactStore');

// Blog
Route::get('blog', 'BlogController@blog');
Route::get('blog/post/{id}/{slug?}', 'BlogController@post')->name('seo');

// Static Pages
Route::get('p/{page}','PagesController@show')->where('page','[^/]*' )->name('seo');

/*
|--------------------------------------------------------------------------
| Shift Marketplace - Public
|--------------------------------------------------------------------------
*/

// Browse shifts (public view, filtered for workers when logged in)
Route::get('shifts', 'ShiftController@index')->name('shifts.index');
Route::get('shifts/{id}', 'ShiftController@show')->name('shift.show');

// Nearby shifts (AJAX)
Route::get('shifts/nearby', 'ShiftController@nearby')->name('shifts.nearby');

/*
|--------------------------------------------------------------------------
| Authenticated User Routes
|--------------------------------------------------------------------------
*/

Route::group(['middleware' => 'auth'], function() {

    /*
    |--------------------------------------------------------------------------
    | Onboarding (All User Types)
    |--------------------------------------------------------------------------
    */
    Route::get('onboarding', 'OnboardingController@start')->name('onboarding.start');
    Route::post('onboarding/worker', 'OnboardingController@workerOnboarding')->name('onboarding.worker');
    Route::post('onboarding/business', 'OnboardingController@businessOnboarding')->name('onboarding.business');
    Route::post('onboarding/agency', 'OnboardingController@agencyOnboarding')->name('onboarding.agency');
    Route::post('onboarding/complete', 'OnboardingController@complete')->name('onboarding.complete');

    /*
    |--------------------------------------------------------------------------
    | Unified Dashboard (Routes to appropriate dashboard based on user type)
    |--------------------------------------------------------------------------
    */
    Route::get('dashboard', 'DashboardController@index')->name('dashboard');

    /*
    |--------------------------------------------------------------------------
    | Worker Routes
    |--------------------------------------------------------------------------
    */
    Route::group(['prefix' => 'worker', 'middleware' => 'worker'], function() {

        // Dashboard
        Route::get('dashboard', 'Worker\DashboardController@index')->name('worker.dashboard');

        // Applications
        Route::get('applications', 'Worker\ShiftApplicationController@myApplications')->name('worker.applications');
        Route::post('shifts/{id}/apply', 'Worker\ShiftApplicationController@apply')->name('worker.apply');
        Route::post('applications/{id}/withdraw', 'Worker\ShiftApplicationController@withdraw')->name('worker.withdraw');

        // Assignments
        Route::get('assignments', 'Worker\ShiftApplicationController@myAssignments')->name('worker.assignments');
        Route::post('assignments/{id}/check-in', 'Worker\ShiftApplicationController@checkIn')->name('worker.checkin');
        Route::post('assignments/{id}/check-out', 'Worker\ShiftApplicationController@checkOut')->name('worker.checkout');

        // Recommended shifts
        Route::get('shifts/recommended', 'ShiftController@recommended')->name('worker.recommended');

        // Availability broadcasting
        Route::get('availability/broadcast', 'Worker\AvailabilityBroadcastController@index')->name('worker.availability.index');
        Route::post('availability/broadcast', 'Worker\AvailabilityBroadcastController@store')->name('worker.availability.store');
        Route::delete('availability/broadcast/{id}', 'Worker\AvailabilityBroadcastController@cancel')->name('worker.availability.cancel');
        Route::post('availability/broadcast/{id}/extend', 'Worker\AvailabilityBroadcastController@extend')->name('worker.availability.extend');

        // Shift invitations
        Route::post('invitations/{id}/respond', 'Worker\ShiftApplicationController@respondToInvitation')->name('worker.invitation.respond');

        // Earnings
        Route::get('earnings', 'Worker\ShiftApplicationController@earnings')->name('worker.earnings');

        // Shift Swaps
        Route::get('swaps', 'ShiftSwapController@mySwaps')->name('worker.swaps');
        Route::get('swaps/browse', 'ShiftSwapController@index')->name('swaps.index');
        Route::get('swaps/{id}', 'ShiftSwapController@show')->name('swaps.show');
        Route::get('assignments/{id}/swap', 'ShiftSwapController@create')->name('swaps.create');
        Route::post('assignments/{id}/swap', 'ShiftSwapController@store')->name('swaps.store');
        Route::post('swaps/{id}/accept', 'ShiftSwapController@accept')->name('swaps.accept');
        Route::post('swaps/{id}/cancel', 'ShiftSwapController@cancel')->name('swaps.cancel');
        Route::post('swaps/{id}/withdraw', 'ShiftSwapController@withdrawAcceptance')->name('swaps.withdraw');
    });

    /*
    |--------------------------------------------------------------------------
    | Business Routes
    |--------------------------------------------------------------------------
    */
    Route::group(['prefix' => 'business', 'middleware' => 'business'], function() {

        // Dashboard
        Route::get('dashboard', 'Business\DashboardController@index')->name('business.dashboard');

        // Shift Management
        Route::get('shifts', 'Business\ShiftManagementController@myShifts')->name('business.shifts');

        // Analytics
        Route::get('analytics', 'Business\ShiftManagementController@analytics')->name('business.analytics');

        // Shift Management
        Route::get('shifts/{id}/applications', 'Business\ShiftManagementController@viewApplications')->name('business.applications');
        Route::post('shifts/{shiftId}/applications/{applicationId}/assign', 'Business\ShiftManagementController@assignWorker')->name('business.assign');
        Route::post('shifts/{shiftId}/assignments/{assignmentId}/unassign', 'Business\ShiftManagementController@unassignWorker')->name('business.unassign');
        Route::post('shifts/{shiftId}/assignments/{assignmentId}/no-show', 'Business\ShiftManagementController@markNoShow')->name('business.noshow');
        Route::post('shifts/{id}/start', 'Business\ShiftManagementController@markShiftStarted')->name('business.start');
        Route::post('shifts/{id}/complete', 'Business\ShiftManagementController@markShiftCompleted')->name('business.complete');
        Route::post('shifts/{shiftId}/applications/{applicationId}/reject', 'Business\ShiftManagementController@rejectApplication')->name('business.reject');

        // Worker Invitations
        Route::post('shifts/{id}/invite', 'Business\ShiftManagementController@inviteWorker')->name('business.invite');

        // Available Workers
        Route::get('available-workers', 'Business\AvailableWorkersController@index')->name('business.available-workers');
        Route::post('available-workers/invite', 'Business\AvailableWorkersController@inviteWorker')->name('business.invite-worker');
        Route::post('available-workers/bulk-invite', 'Business\AvailableWorkersController@bulkInvite')->name('business.bulk-invite');
        Route::get('available-workers/match/{shiftId}', 'Business\AvailableWorkersController@matchForShift')->name('business.match-workers');

        // Shift Swaps
        Route::get('swaps', 'ShiftSwapController@businessSwaps')->name('business.swaps');
        Route::post('swaps/{id}/approve', 'ShiftSwapController@approve')->name('business.swaps.approve');
        Route::post('swaps/{id}/reject', 'ShiftSwapController@reject')->name('business.swaps.reject');
    });

    /*
    |--------------------------------------------------------------------------
    | Shift CRUD (Business & Agency)
    |--------------------------------------------------------------------------
    */
    Route::group(['middleware' => 'business'], function() {
        Route::get('shifts/create', 'ShiftController@create')->name('shift.create');
        Route::post('shifts', 'ShiftController@store')->name('shift.store');
        Route::get('shifts/{id}/edit', 'ShiftController@edit')->name('shift.edit');
        Route::put('shifts/{id}', 'ShiftController@update')->name('shift.update');
        Route::delete('shifts/{id}', 'ShiftController@destroy')->name('shift.destroy');
        Route::post('shifts/{id}/duplicate', 'ShiftController@duplicate')->name('shift.duplicate');
    });

    /*
    |--------------------------------------------------------------------------
    | Agency Routes
    |--------------------------------------------------------------------------
    */
    Route::group(['prefix' => 'agency', 'middleware' => 'agency'], function() {

        // Dashboard
        Route::get('dashboard', 'Agency\ShiftManagementController@dashboard')->name('agency.dashboard');

        // Worker Management
        Route::get('workers', 'Agency\ShiftManagementController@workers')->name('agency.workers');
        Route::post('workers/add', 'Agency\ShiftManagementController@addWorker')->name('agency.workers.add');
        Route::put('workers/{id}/edit', 'Agency\ShiftManagementController@editWorker')->name('agency.workers.edit');
        Route::delete('workers/{id}/remove', 'Agency\ShiftManagementController@removeWorker')->name('agency.workers.remove');

        // Shift Browsing & Assignment
        Route::get('shifts/browse', 'Agency\ShiftManagementController@browseShifts')->name('agency.shifts.browse');
        Route::get('shifts/{id}', 'Agency\ShiftManagementController@viewShift')->name('agency.shifts.view');
        Route::post('shifts/assign', 'Agency\ShiftManagementController@assignWorker')->name('agency.shifts.assign');

        // Assignments
        Route::get('assignments', 'Agency\ShiftManagementController@assignments')->name('agency.assignments');

        // Commissions & Earnings
        Route::get('commissions', 'Agency\ShiftManagementController@commissions')->name('agency.commissions');
        Route::get('commissions/export', 'Agency\ShiftManagementController@exportCommissions')->name('agency.commissions.export');

        // Analytics
        Route::get('analytics', 'Agency\ShiftManagementController@analytics')->name('agency.analytics');
        Route::get('analytics/export', 'Agency\ShiftManagementController@exportAnalytics')->name('agency.analytics.export');
    });

    /*
    |--------------------------------------------------------------------------
    | Common Settings (All User Types)
    |--------------------------------------------------------------------------
    */

    // Profile Settings
    Route::get('settings/page','User\SettingsController@editPage')->name('settings.page');
    Route::post('settings/page','User\SettingsController@updatePage');
    Route::post('delete/cover','User\MediaController@deleteImageCover');

    // Privacy and Security
    Route::get('privacy/security','User\SettingsController@privacySecurity')->name('settings.privacy');
    Route::post('privacy/security','User\SettingsController@savePrivacySecurity');
    Route::post('logout/session/{id}', 'User\SettingsController@logoutSession');

    // Account Settings
    Route::get('settings/account','User\SettingsController@account')->name('settings.account');
    Route::post('settings/account','User\SettingsController@saveAccount');
    Route::post('settings/password','User\SettingsController@updatePassword')->name('settings.password');

    // Notifications
    Route::get('settings/notifications','User\SettingsController@notifications')->name('settings.notifications');
    Route::post('settings/notifications','User\SettingsController@saveNotifications');

    // Verification
    Route::get('settings/verify/account','User\VerificationController@verifyAccount')->name('settings.verify');
    Route::post('settings/verify/account','User\VerificationController@verifyAccountSend');

    // Blocked Users
    Route::get('settings/restrictions','User\RestrictionsController@index')->name('settings.restrictions');
    Route::post('ajax/block','User\RestrictionsController@block');

    // Payout Settings
    Route::get('settings/payout','User\SettingsController@payout')->name('settings.payout');

    /*
    |--------------------------------------------------------------------------
    | Stripe Connect (Worker Payouts)
    |--------------------------------------------------------------------------
    */
    Route::get('settings/stripe-connect','StripeConnectController@index')->name('stripe.connect');
    Route::get('settings/stripe-connect/onboarding','StripeConnectController@onboarding')->name('stripe.connect.onboarding');
    Route::get('settings/stripe-connect/return','StripeConnectController@return')->name('stripe.connect.return');
    Route::get('settings/stripe-connect/refresh','StripeConnectController@refresh')->name('stripe.connect.refresh');

    /*
    |--------------------------------------------------------------------------
    | Payment Methods (Business)
    |--------------------------------------------------------------------------
    */
    Route::post('stripe/payment-method/add','StripeController@addPaymentMethod')->name('stripe.payment.add');
    Route::post('stripe/payment-method/delete','StripeController@deletePaymentMethod')->name('stripe.payment.delete');
    Route::post('stripe/payment-method/default','StripeController@setDefaultPaymentMethod')->name('stripe.payment.default');

    /*
    |--------------------------------------------------------------------------
    | Transactions & Payment History
    |--------------------------------------------------------------------------
    */
    Route::get('my/transactions', 'TransactionsController@index')->name('transactions.index');
    Route::post('my/transactions/{id}/dispute', 'TransactionsController@fileDispute')->name('transactions.dispute');
    Route::get('my/transactions/export', 'TransactionsController@export')->name('transactions.export');

    /*
    |--------------------------------------------------------------------------
    | Messaging System (with Shift Context)
    |--------------------------------------------------------------------------
    */
    Route::get('messages','MessagesController@inbox')->name('messages');
    Route::get('messages/new','MessagesController@new')->name('messages.new');
    Route::get('messages/{id}','MessagesController@messages')->name('messages.show');
    Route::post('message/send','MessagesController@send')->name('message.send');
    Route::delete('messages/{id}','MessagesController@delete')->name('message.delete');

    // Shift-specific messaging
    Route::get('shifts/{shiftId}/messages','MessagesController@shiftMessages')->name('shift.messages');
    Route::post('shifts/{shiftId}/message','MessagesController@sendShiftMessage')->name('shift.message.send');

    /*
    |--------------------------------------------------------------------------
    | Notifications
    |--------------------------------------------------------------------------
    */
    Route::get('notifications','NotificationsController@index')->name('notifications');
    Route::post('notifications/read','NotificationsController@markAsRead')->name('notifications.read');
    Route::post('notifications/delete','NotificationsController@delete')->name('notifications.delete');

    /*
    |--------------------------------------------------------------------------
    | Transactions & Withdrawals
    |--------------------------------------------------------------------------
    */
    Route::get('my/transactions','User\TransactionsController@index')->name('transactions');
    Route::get('my/withdrawals','User\WithdrawalsController@index')->name('withdrawals');
    Route::post('withdrawal/request','User\WithdrawalsController@request')->name('withdrawal.request');
    Route::post('withdrawal/cancel/{id}','User\WithdrawalsController@cancel')->name('withdrawal.cancel');

    /*
    |--------------------------------------------------------------------------
    | Add Funds (Business)
    |--------------------------------------------------------------------------
    */
    Route::get('my/wallet','AddFundsController@index')->name('wallet')->middleware('business');
    Route::post('add/funds','AddFundsController@add')->name('funds.add')->middleware('business');

    /*
    |--------------------------------------------------------------------------
    | User Profiles (Public View)
    |--------------------------------------------------------------------------
    */
    Route::get('{username}', 'UserController@profile')->name('profile');
    Route::post('{username}/follow', 'User\InteractionController@follow')->name('follow');

}); // End Authenticated Routes

/*
|--------------------------------------------------------------------------
| Stripe Webhooks
|--------------------------------------------------------------------------
*/
Route::post('stripe/webhook','StripeWebHookController@handleWebhook');

// Paypal IPN (if still used)
Route::post('paypal/ipn','PayPalController@paypalIpn');
Route::post('paypal/add/funds/ipn','AddFundsController@paypalIpn');

// CCBill Webhook (if still used)
Route::post('webhook/ccbill', 'CCBillController@webhooks');
Route::any('ccbill/approved', 'CCBillController@approved');

// Paystack Webhook (if still used)
Route::post('webhook/paystack', 'PaystackController@webhooks');

/*
|--------------------------------------------------------------------------
| Admin Routes
|--------------------------------------------------------------------------
*/
Route::group(['middleware' => ['auth','role'], 'prefix' => 'panel/admin'], function() {

    // Dashboard
    Route::get('/', 'AdminController@admin')->name('admin');

    // Users Management
    Route::get('members', 'AdminController@index')->name('admin.members');
    Route::get('members/pending', 'AdminController@membersPending')->name('admin.members.pending');
    Route::get('members/edit/{id}', 'AdminController@edit')->name('admin.member.edit');
    Route::post('members/edit/{id}', 'AdminController@update');
    Route::delete('members/delete/{id}', 'AdminController@destroy')->name('admin.member.delete');

    // ===== SHIFT MANAGEMENT (NEW) =====
    Route::group(['prefix' => 'shifts', 'namespace' => 'Admin'], function() {
        Route::get('/', 'ShiftManagementController@index')->name('admin.shifts');
        Route::get('/{id}', 'ShiftManagementController@show')->name('admin.shifts.show');
        Route::post('/{id}/flag', 'ShiftManagementController@flagShift')->name('admin.shifts.flag');
        Route::post('/{id}/unflag', 'ShiftManagementController@unflagShift')->name('admin.shifts.unflag');
        Route::delete('/{id}/remove', 'ShiftManagementController@removeShift')->name('admin.shifts.remove');
        Route::get('/flagged/review', 'ShiftManagementController@flaggedShifts')->name('admin.shifts.flagged');
        Route::post('/bulk/approve', 'ShiftManagementController@bulkApprove')->name('admin.shifts.bulk.approve');
        Route::get('/statistics/view', 'ShiftManagementController@statistics')->name('admin.shifts.statistics');
    });

    // ===== PAYMENT MANAGEMENT (NEW) =====
    Route::group(['prefix' => 'payments', 'namespace' => 'Admin'], function() {
        Route::get('/', 'ShiftPaymentController@index')->name('admin.payments');
        Route::get('/{id}', 'ShiftPaymentController@show')->name('admin.payments.show');
        Route::post('/{id}/release-escrow', 'ShiftPaymentController@releaseEscrow')->name('admin.payments.release');
        Route::post('/{id}/refund', 'ShiftPaymentController@refund')->name('admin.payments.refund');
        Route::post('/{id}/hold', 'ShiftPaymentController@holdPayment')->name('admin.payments.hold');
        Route::post('/{id}/retry-payout', 'ShiftPaymentController@retryInstantPayout')->name('admin.payments.retry');
        Route::get('/disputes/list', 'ShiftPaymentController@disputes')->name('admin.payments.disputes');
        Route::post('/disputes/{id}/resolve', 'ShiftPaymentController@resolveDispute')->name('admin.payments.disputes.resolve');
        Route::get('/statistics/view', 'ShiftPaymentController@statistics')->name('admin.payments.statistics');
    });

    // ===== WORKER MANAGEMENT (NEW) =====
    Route::group(['prefix' => 'workers', 'namespace' => 'Admin'], function() {
        Route::get('/', 'WorkerManagementController@index')->name('admin.workers');
        Route::get('/{id}', 'WorkerManagementController@show')->name('admin.workers.show');
        Route::post('/{id}/verify', 'WorkerManagementController@verifyWorker')->name('admin.workers.verify');
        Route::post('/{id}/unverify', 'WorkerManagementController@unverifyWorker')->name('admin.workers.unverify');
        Route::post('/{id}/badge', 'WorkerManagementController@assignBadge')->name('admin.workers.badge');
        Route::post('/{id}/suspend', 'WorkerManagementController@suspend')->name('admin.workers.suspend');
        Route::post('/{id}/unsuspend', 'WorkerManagementController@unsuspend')->name('admin.workers.unsuspend');
        Route::get('/{id}/skills', 'WorkerManagementController@viewSkills')->name('admin.workers.skills');
        Route::get('/{id}/certifications', 'WorkerManagementController@viewCertifications')->name('admin.workers.certifications');
        Route::post('/{workerId}/certifications/{certificationId}/approve', 'WorkerManagementController@approveCertification')->name('admin.workers.certifications.approve');
    });

    // ===== BUSINESS MANAGEMENT (NEW) =====
    Route::group(['prefix' => 'businesses', 'namespace' => 'Admin'], function() {
        Route::get('/', 'BusinessManagementController@index')->name('admin.businesses');
        Route::get('/{id}', 'BusinessManagementController@show')->name('admin.businesses.show');
        Route::post('/{id}/verify', 'BusinessManagementController@verifyBusiness')->name('admin.businesses.verify');
        Route::post('/{id}/unverify', 'BusinessManagementController@unverifyBusiness')->name('admin.businesses.unverify');
        Route::post('/{id}/approve-license', 'BusinessManagementController@approveLicense')->name('admin.businesses.license.approve');
        Route::post('/{id}/spending-limit', 'BusinessManagementController@setSpendingLimit')->name('admin.businesses.spending.limit');
        Route::post('/{id}/suspend', 'BusinessManagementController@suspend')->name('admin.businesses.suspend');
        Route::post('/{id}/unsuspend', 'BusinessManagementController@unsuspend')->name('admin.businesses.unsuspend');
        Route::get('/{id}/payments', 'BusinessManagementController@paymentHistory')->name('admin.businesses.payments');
    });

    // Payment Disputes
    Route::get('disputes', 'AdminController@disputes')->name('admin.disputes');
    Route::get('disputes/{id}', 'AdminController@disputeDetails')->name('admin.dispute.details');
    Route::post('disputes/{id}/resolve', 'AdminController@resolveDispute')->name('admin.dispute.resolve');

    // Verifications
    Route::get('verification/pending', 'AdminController@verificationPending')->name('admin.verification.pending');
    Route::post('verification/approve/{id}', 'AdminController@verificationApprove')->name('admin.verification.approve');
    Route::post('verification/reject/{id}', 'AdminController@verificationReject')->name('admin.verification.reject');

    // Certifications Review
    Route::get('certifications/pending', 'AdminController@certificationsPending')->name('admin.certifications.pending');
    Route::post('certifications/approve/{id}', 'AdminController@certificationApprove')->name('admin.certification.approve');
    Route::post('certifications/reject/{id}', 'AdminController@certificationReject')->name('admin.certification.reject');

    // Reports
    Route::get('reports', 'AdminController@reports')->name('admin.reports');
    Route::post('reports/{id}/action', 'AdminController@reportAction')->name('admin.report.action');

    // Settings
    Route::get('settings', 'AdminController@settings')->name('admin.settings');
    Route::post('settings', 'AdminController@saveSettings');

    // Platform Settings
    Route::get('settings/limits', 'AdminController@limitsSettings')->name('admin.settings.limits');
    Route::post('settings/limits', 'AdminController@saveLimitsSettings');

    // Payment Settings
    Route::get('settings/payments', 'AdminController@paymentsSettings')->name('admin.settings.payments');
    Route::post('settings/payments', 'AdminController@savePaymentsSettings');

    // Blog Management
    Route::get('posts', 'AdminController@posts')->name('admin.posts');
    Route::get('posts/create', 'AdminController@createPost')->name('admin.post.create');
    Route::post('posts/create', 'AdminController@storePost');
    Route::get('posts/edit/{id}', 'AdminController@editPost')->name('admin.post.edit');
    Route::post('posts/edit/{id}', 'AdminController@updatePost');
    Route::delete('posts/delete/{id}', 'AdminController@deletePost')->name('admin.post.delete');

    // Pages Management
    Route::get('pages', 'AdminController@pages')->name('admin.pages');
    Route::get('pages/create', 'AdminController@createPage')->name('admin.page.create');
    Route::post('pages/create', 'AdminController@storePage');
    Route::get('pages/edit/{id}', 'AdminController@editPage')->name('admin.page.edit');
    Route::post('pages/edit/{id}', 'AdminController@updatePage');
    Route::delete('pages/delete/{id}', 'AdminController@deletePage')->name('admin.page.delete');

    // Announcements
    Route::get('announcements', 'AdminController@announcements')->name('admin.announcements');
    Route::post('announcements/create', 'AdminController@createAnnouncement')->name('admin.announcement.create');
    Route::delete('announcements/delete/{id}', 'AdminController@deleteAnnouncement')->name('admin.announcement.delete');

    // Withdrawals Management
    Route::get('withdrawals', 'AdminController@withdrawals')->name('admin.withdrawals');
    Route::get('withdrawals/pending', 'AdminController@withdrawalsPending')->name('admin.withdrawals.pending');
    Route::post('withdrawals/approve/{id}', 'AdminController@approveWithdrawal')->name('admin.withdrawal.approve');
    Route::post('withdrawals/reject/{id}', 'AdminController@rejectWithdrawal')->name('admin.withdrawal.reject');

    // Deposits
    Route::get('deposits', 'AdminController@deposits')->name('admin.deposits');

    // Transactions
    Route::get('transactions', 'AdminController@transactions')->name('admin.transactions');

    // Platform Revenue
    Route::get('revenue', 'AdminController@revenue')->name('admin.revenue');

}); // End Admin Routes

/*
|--------------------------------------------------------------------------
| AI Agent API Routes
|--------------------------------------------------------------------------
*/
Route::group(['prefix' => 'api/agent', 'middleware' => 'api.agent'], function() {

    // Shift Management
    Route::post('shifts', 'Api\AgentController@createShift')->name('api.agent.shift.create');
    Route::get('shifts/{id}', 'Api\AgentController@getShift')->name('api.agent.shift.get');
    Route::put('shifts/{id}', 'Api\AgentController@updateShift')->name('api.agent.shift.update');
    Route::delete('shifts/{id}', 'Api\AgentController@cancelShift')->name('api.agent.shift.cancel');

    // Worker Search & Matching
    Route::get('workers/search', 'Api\AgentController@searchWorkers')->name('api.agent.workers.search');
    Route::post('workers/invite', 'Api\AgentController@inviteWorker')->name('api.agent.workers.invite');
    Route::post('match/workers', 'Api\AgentController@matchWorkers')->name('api.agent.match.workers');

    // Applications
    Route::get('applications', 'Api\AgentController@getApplications')->name('api.agent.applications');
    Route::post('applications/{id}/accept', 'Api\AgentController@acceptApplication')->name('api.agent.application.accept');

    // Statistics
    Route::get('stats', 'Api\AgentController@getStats')->name('api.agent.stats');

}); // End AI Agent API Routes

/*
|--------------------------------------------------------------------------
| Legacy Routes (To Be Deprecated)
|--------------------------------------------------------------------------
| These routes are deprecated legacy routes that will be removed
| during the platform refactoring phase. Kept temporarily to prevent breakage.
*/

// ... any legacy routes that need to be maintained temporarily can go here
